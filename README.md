<p align="center">
    <h1 align="center">Прототип сервиса для работы с КЭП 
    по кейсу почты России
</h1></p>

<h3>Кейс</h3>
<p>Разработка прототипа системы
   обработки и подписания документов
   с использованием электронной
   подписи, применяемой для работы с
   обращениями граждан</p>

<h4>Реализованный функционал</h4>
<ul>
    <li>регистрация пользователя</li>
    <li>авторизация пользователя</li>
    <li>генерация КЭП в личном кабинете пользователя</li>
    <li>написание обращения пользователем и прикрепление файлов</li>
    <li>отслеживание прогресса обработки обращений</li>
    <li>ответ администратора на обращение</li>
    <li>подписание и отправка ответа пользователю</li>
    <li></li>
    <li></li>
</ul>

<h4>Демо</h4>
<p>Демо сервиса доступно по адресу: </p>
<p>Реквизиты тестового пользователя: email: <b>testuser@test.ru</b>, пароль: <b>testuser</b></p>
<p>Реквизиты тестового администратора: email: <b>admin@test.ru</b>, пароль: <b>xt,ehfirf</b></p>

<h4>Как пользоваться сервисом</h4>

<h5>Вход в систему</h5>
<p>Любой человек может войти в систему под тестовым пользователем <b>testuser@test.ru</b> с паролем <b>testuser</b> на странице авторизации.</p>

<h5>Регистрация</h5>
<p>Если тестовый пользователь не вариант, то можно зарегистрировать собственную учетную запись на странице регистрации. и подтвердить ее email.</p>

<h5>Работа с обращениями</h5>
<p>После входа пользователя на сервис он попадает на страницу работы с обращениями, где он может написать обращение и загрузить свой файл, видит уже ранее написаные и их статус обработки.</p>
<p>Пользователь может нажать на название обращения и войти в конкретную информацию о обращении, там есть возможность посмотреть ответ на обращение.</p>
<p>Администратор в личном кабинете заходит в обращение, которое в очереди. Он может нажать кнопку ответить и сформировать ответ на обращение с прикреплением файлов.</p>
<p>После формирования ответа, Администратор может посмотреть ответ и подписать его, а после подписания согласовать и отправить пользователю.</p>



ТРЕБОВАНИЯ
------------
1) развертывание сервиса производится на debian-like linux;
2) требуется установленный web-сервер с поддержкой PHP(версия 7.4+) интерпретации (apache, nginx);
3) требуется установленная СУБД PostgreSQL(версия 12+);
4) требуется установленный пакет openssl для работы с подписями;
5) требуется установленный пакет libreoffice для работы с файлами.


УСТАНОВКА
------------

### База данных PostgreSQL

Необходимо создать пустую базу данных PostgreSQL, а подключение к базе прописать в конфигурационный файл сервиса по адресу: папка_сервиса/config/db.php
### Выполнение миграций

Для заполнения базы данных системной информацией выполните в корневой папке сервиса: 
~~~
./yii migrate 
~~~
и согласитесь с запросом

### Веб-сервер

Настройте ваш веб-сервер так, чтобы папка_сервиса/web была доступна через веб-сервер.

Или можно запустить тестовый стенд командой:
~~~
./yii serve/index
~~~

### Установка зависимостей проекта

Установка зависимостей осуществляется с помощью [Composer](http://getcomposer.org/). Если у вас его нет вы можете установить его по инструкции
на [getcomposer.org](http://getcomposer.org/doc/00-intro.md#installation-nix).

После этого выполнить команду в директории проекта:

~~~
composer install
~~~
